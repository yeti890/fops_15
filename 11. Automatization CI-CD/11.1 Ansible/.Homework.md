# Домашнее задание к занятию «Ansible. Часть 1»

### Оформление домашнего задания

1. Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте на проверку ссылку на ваш документ в личном кабинете.  
1. В названии файла укажите номер лекции и фамилию студента. Пример названия: 7.1. Ansible. Часть 1 — Вологин Сергей.
1. Перед отправкой проверьте, что доступ для просмотра открыт всем, у кого есть ссылка. Если нужно прикрепить дополнительные ссылки, добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1

**Ответьте на вопрос в свободной форме.**

Какие преимущества даёт подход IAC?

### Ответ:

IaC (Infrastructure as Code) - способ управления IT-инфраструктурой с использованием программных техник. Вместо ручного управления серверами, сетями и хранилищами данных через интерфейсы веб-консоли или командные строки, IAC позволяет инженерам и администраторам описывать и управлять инфраструктурой с использованием кода, который может быть автоматически развернут, изменен и масштабирован.

Преимущества IaC:

* Нет необходимости в ручной настройке.
* Скорость — настройка («поднятие») инфраструктуры занимает
заметно меньше времени.
* Воспроизводимость — поднимаемая инфраструктура всегда
идентична.
* Масштабируемость — один инженер может с помощью
одного и того же кода настраивать и управлять огромным
количеством машин.

---

### Задание 2 

**Выполните действия и приложите скриншоты действий.**

1. Установите Ansible.
2. Настройте управляемые виртуальные машины, не меньше двух.
3. Создайте файл inventory с созданными вами ВМ.
4. Проверьте доступность хостов с помощью модуля ping.
 

 ### Решение:

С помощью официальной документации развернем управляющий сервер Ansible в Ubuntu Server 22.04 LTS

Предварительно установим менеджер пакетов pip

```
sudo apt update
```
```
sudo apt install python3-pip
```

Теперь перейдем к установке Ansible
```
sudo apt install software-properties-common
```
```
sudo add-apt-repository --yes --update ppa:ansible/ansible
```
```
sudo apt install ansible
```

Так как у нас Bash то для удобства и эффективности взаимодействия установим и настроим библиотеку Argcomplete
```
python3 -m pip install --user argcomplete
```  
```
activate-global-python-argcomplete --user
```

Проверим установку:
```
ansible --version
ansible-community --version
```
![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-check-version.png)

Создаем inventory

![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-hosts.png)

![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-cfg.png)

Проверяем доступность с помощью модуля пинг

![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-ping-pong.png)
---

### Задание 3 

**Ответьте на вопрос в свободной форме.**

Какая разница между параметрами forks и serial? 

### Ответ:

В Ansible параметры forks и serial используются для управления параллельным выполнением задач на нескольких хостах.

Forks - это количество хостов, с которыми Ansible может работать параллельно. Этот параметр можно задать в ansible.cfg или передать через командную строку или указать в плейбуке. 

 По умолчанию значение forks = 5. При выполнении плейбука Ansible запустит одновременно 1-й таск на 5 хостах затем на следующих 5-ти, пока не выполнит его на всем инвентори. Затем только перейдет к следующему таску. 

Serial - этот параметр обычно указывают в плейбуке, он ограничивает количество хостов на которых одновременно будет выполняться весь плейбук (все таски), и только после этого Ansible перейдет к выполнению на следующих хостах инвентори.

---

### Задание 4 

В этом задании вы будете работать с Ad-hoc коммандами.

**Выполните действия и приложите скриншоты запуска команд.**

1. Установите на управляемых хостах любой пакет, которого нет.
2. Проверьте статус любого, присутствующего на управляемой машине, сервиса. 
3. Создайте файл с содержимым «I like Linux» по пути /tmp/netology.txt.

### Решение

1. Установим Midnight Commander:

![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-apt.png)

![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-apt-2.png)

2. Проверим статус службы SSH


![screenshoot](/11.%20Automatization%20CI-CD/screenshots/ansible-shell-status.png)

![screenshoot](/11.%20Automatization%20CI-CD/screenshots/ansible-command-status.png)

3. Создадим файлы

![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-copy-ilikelinux.png)

Проверим содержимое:

![screenshot](/11.%20Automatization%20CI-CD/screenshots/ansible-copy-check.png)

---